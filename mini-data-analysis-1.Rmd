---
title: Mini Data Analysis 1
author: Jana Osea
date: October 5, 2021
output: github_document
---

# 0 Introduction

This file goes through my exploration of different data sets in the `datateachr` package. I will look at 7 data sets as described [here](https://stat545.stat.ubc.ca/mini-project/mini-project-1/). I will be documenting how I choose my final data set and then I will perform various data exploration techniques to this data set in order to create 4 research questions motivated by the exploration.

# 1 Choose Favorite Data set

## 1.1 Choose 4 Data sets

```{r, include = FALSE}
library(datateachr)
library(tidyverse)
library(dplyr)
library(ggridges)
library(ggplot2)
```

From an initial pass through of the description of the various data set, I am most interested in the following 4 data sets:

1. *apt_buildings*
2. *building_permits*
3. *parking_meters*
4. *vancouver_trees*

## 1.2 Exploring Attributes of the 4 Datasets

### 1.2.1 *apt_buildings*
```{r}
str(apt_buildings)
```

### 1.2.2 *building_permits*
```{r}
str(building_permits)
```
  
### 1.2.3 *parking_meters*
```{r}
str(parking_meters)
```

### 1.2.4 *vancouver_trees*

```{r}
str(vancouver_trees)
```

## 1.3 Choose 2 Data sets

I am most interested in the *apt_buildings* and *vancouver_trees*. The *apt_buildings* has a lot of numerical variables such as *no_of_units* and *no_of_accessible_parking_space*. In addition, the categorical variables are easily understandable like *pets_allowed* and *parking_type*. I do not have to extrapolate their meanings unlike the *parking_meters* data set. This data set also contains time variables, *year_built* and *year_registered*, which can be used for time series analysis. There's a lot of possible relationships that can be explored in this data set.

*vancouver_trees* is also very interesting because it has exact *longitude* and *latitude* values for each tree which can be used for interesting geographic visualization. Similar to *apt_buildings*, it has a lot of numerical and categorical variables like *diameter* of the tree and the *species_name*. Various relationships can be explored using this data set. The date of when the trees were planted were also recorded which can be used for time series analysis.


## 1.4 Final Data set

For the 2 data sets above, a lot of research questions can be formed. For example, using the *apt_buildings* data set, we can ask the question *"does the proportion of smoking vs. non-smoking buildings change over the years?"*. Using the *vancouver_trees* data set, we can ask *"does the location affect the type of species of tree planted?"*

I am personally more interested in the changes of the apartment buildings over the years. I am also interested in exploring  relationship of various structural components of apartment buildings with each other. For example, the number of balconies and if pets are allowed. I am excited to see what we can explore with the *apt_buildings* data set.


# 2 Exploring the Data set

## 2.1/2.2 Using 4 Exercises (and Explanation)

### 2.2.1 Exercise 1

I plot the distribution of the number of units 


```{r}
# Plot the distribution of a numeric variable.
outliers <- boxplot.stats(apt_buildings$no_of_units)$out

apt_buildings %>%
  filter(!no_of_units %in% outliers) %>%
  ggplot(aes(x=no_of_units, fill=property_type)) +  
  geom_density(alpha=.2)

apt_buildings %>%
  filter(!no_of_units %in% outliers) %>%
  ggplot(aes(x=no_of_units, y=property_type)) +  
  geom_density_ridges(alpha=0.2, aes(fill=property_type)) 
```

### 2.2.2 Exercise 2:
```{r}
# Explore the relationship between 2 variables in a plot.
apt_buildings %>%
  filter(!is.na(`non-smoking_building`)) %>%
  mutate(year = as.Date(as.character(year_built), format="%Y")) %>%
  filter(year > as.Date("1910", format="%Y")) %>%
  ggplot(aes(x=year, y=no_of_units)) + 
  geom_bar(stat="identity", position="stack", alpha = 0.8, aes(fill=as.factor(`non-smoking_building`)))


apt_buildings %>%
  filter(!is.na(`non-smoking_building`)) %>%
  mutate(year = as.Date(as.character(year_built), format="%Y")) %>%
  filter(year > as.Date("1910", format="%Y")) %>%
  ggplot(aes(x=year, y=no_of_units)) + 
  geom_bar(stat="identity", position="fill", alpha = 0.8,aes(fill=`non-smoking_building`))
```

### 2.2.3 Exercise 3:
```{r}
#Use a boxplot to look at the frequency of different observations within a single variable. You can do this for more than one variable if you wish!

apt_buildings %>%
  filter(!is.na(visitor_parking)) %>%
  filter(!is.na(property_type)) %>%
  filter(!visitor_parking == "UNAVAILABLE") %>%
  ggplot(aes(x=visitor_parking,y=no_of_units, fill=property_type)) +
  geom_boxplot(alpha=0.2) + 
  facet_wrap(~property_type, scale="free")
```

### 2.2.4 Exercise 4:
```{r}
# Make a new tibble with a subset of your data, with variables and observations that you are interested in exploring.
apt_buildings %>%
  filter("Indoor pool" %in% amenities) %>%
  group_by(ward, property_type) %>%
  summarise(total_units = sum(no_of_units))

```

# 3 Research Question

